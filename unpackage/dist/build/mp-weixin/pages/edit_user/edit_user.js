(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/edit_user/edit_user"],{"169d":function(a,t,n){"use strict";var e=n("a209"),o=n.n(e);o.a},7505:function(a,t,n){"use strict";n.r(t);var e=n("842b"),o=n.n(e);for(var i in e)["default"].indexOf(i)<0&&function(a){n.d(t,a,(function(){return e[a]}))}(i);t["default"]=o.a},"842b":function(a,t,n){"use strict";(function(a){var e=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=e(n("28da")),i=getApp(),u={components:{uniNavBar:function(){n.e("components/uni-ui/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("0986"))}.bind(null,n)).catch(n.oe)}},data:function(){return{userInfo:{},avatarPath:"",user_nickname:""}},onLoad:function(t){""!=i.globalData.userinfo?(this.avatarPath=i.globalData.userinfo.avatar,this.user_nickname=i.globalData.userinfo.user_nickname):a.navigateTo({url:"../login/login"})},methods:{back:function(){a.navigateBack({delta:1})},photo:function(){i.globalData;var t=this;a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){var e=n.tempFilePaths,u=e[0];a.request({url:i.globalData.site_url+"Upload.GetQiniuToken",method:"POST",data:{uid:i.globalData.userinfo.id,token:i.globalData.userinfo.token},success:function(n){if(a.hideLoading(),void 0!=n.data.data&&0==n.data.data.code){var e=t.decypt(n.data.data.info[0].token),r="UNIAPP"+t.getTime()+"icon.png";o.default.upload(u,(function(n){a.showToast({title:"上传成功",icon:"none"}),t.avatarPath=n.imageURL}),(function(t){a.showToast({title:"上传失败，请重试",icon:"none"})}),{region:"ECN",domain:i.globalData.qiniuimageurl,key:r,uptoken:e})}else a.showToast({icon:"none",title:"七牛云未配置,请先配置"})},fail:function(){a.hideLoading(),a.showToast({title:"提交失败",icon:"none"})}})}})},getTime:function(){var a=new Date,t=a.getFullYear(),n=a.getMonth()+1,e=a.getDate(),o=a.getHours(),i=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),u=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();return t+n+e+o+i+u},decypt:function(a){for(var t="",n="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&",e=0;e<a.length;e++)for(var o=a[e],i=0;i<n.length;i++){var u=n[i];o==u&&(t+=0==i?n[n.length-1]:n[i-1])}return t},getUserNickname:function(a){this.user_nickname=a.detail.value},saveEdit:function(){var t=i.globalData;a.request({url:t.site_url+"User.UpUserInfo",method:"POST",data:{uid:t.userinfo.id,token:t.userinfo.token,fields:JSON.stringify({user_nickname:this.user_nickname,avatar:this.avatarPath})},success:function(t){0==t.data.data.code&&(i.globalData.userinfo.user_nickname=t.data.data.info[0].user_nickname,i.globalData.userinfo.avatar=t.data.data.info[0].avatar,a.setStorage({key:"userinfo",data:i.globalData.userinfo,success:function(a){console.log(a)}}),setTimeout((function(){a.navigateBack({delta:1})}),150)),a.showToast({icon:"none",title:t.data.data.msg})},fail:function(){a.showToast({title:"网络错误",icon:"none"})}})}}};t.default=u}).call(this,n("df3c")["default"])},"8cd0":function(a,t,n){"use strict";n.d(t,"b",(function(){return e})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var e=function(){var a=this.$createElement;this._self._c},o=[]},9093:function(a,t,n){"use strict";n.r(t);var e=n("8cd0"),o=n("7505");for(var i in o)["default"].indexOf(i)<0&&function(a){n.d(t,a,(function(){return o[a]}))}(i);n("169d");var u=n("828b"),r=Object(u["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);t["default"]=r.exports},a209:function(a,t,n){},b0b6:function(a,t,n){"use strict";(function(a,t){var e=n("47a9");n("fc20");e(n("3240"));var o=e(n("9093"));a.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["b0b6","common/runtime","common/vendor"]]]);